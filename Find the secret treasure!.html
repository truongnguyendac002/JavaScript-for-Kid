<!DOCTYPE html>
<html>
	<head>
		<title>Find the secret treasure!</title>
	</head>

	<body>
		<h1 id="heading">Find the buried treasure!</h1>

		<img id="map" width=400 height=400 
		src="http://nostarch.com/images/treasuremap.png">
		
		<p id="distance"> </p>
		<script src="https://code.jquery.com/jquery-2.1.0.js"></script>    

		<script>
		function getRandomNumber(size) {
			return Math.floor(Math.random() *size);
		};
		
		function getDistance (event, target) {
			var diffX =event.offsetX - target.x;
			var diffY =event.offsetY - target.y;
			return Math.sqrt((diffX * diffX) + (diffY * diffY));
		};

		var getDistanceHint = function (distance) {
			if (distance < 20) return "Congratulations !!\nYou have found the treasure.";
			else if (distance < 40) return "Very close !!";
			else if (distance < 80) return "It's almost there ..";
			else if (distance < 160) return "It may be nearby !";
			else if (distance < 250) return "It's a bit far from the treasure";
			else return "So far away.. My 5 year old brother can do better than you.";
		}

		var width = 400, height = 400;
		var clicks = 0;

		var target = {
			x: getRandomNumber(width),
			y: getRandomNumber(height)
		};

		$("#map").click(function (event) {
			clicks++;
			var distance = getDistance(event,target);
			var distanceHint = getDistanceHint(distance);
			$("#distance").text(distanceHint);

			if (distance < 20) {
				alert("Found the treasure in "+ clicks +" clicks!");
			}
		});
		
		</script>
	</body>
</html>